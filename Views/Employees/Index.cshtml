@model IEnumerable<ChapeauPOS.Models.Employee>

@{
	ViewData["Title"] = "Employees";
	int loggedInEmployeeId = -1;
	if (ViewBag.LoggedInEmployee != null)
	{
		loggedInEmployeeId = ViewBag.LoggedInEmployee.EmployeeId;
	}
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

<div class="container mt-4">
	<h2>@ViewData["Title"]</h2>
	<a class="btn btn-primary mb-3" href="@Url.Action("AddNewEmployee", "Employees")">Add New Employee</a>

	<table class="table table-bordered table-striped">
		<thead class="table-dark">
			<tr>
				<th>First Name</th>
				<th>Last Name</th>
				<th>Email</th>
				<th>Role</th>
				<th>Status</th>
				<th>Actions</th>
			</tr>
		</thead>
		<tbody>
			@foreach (var emp in Model)
			{
				string loggedInStyle = emp.EmployeeId == loggedInEmployeeId ? "background-color: #87CEEB;" : string.Empty;
				<tr style="@loggedInStyle">
					<td>@emp.FirstName</td>
					<td>@emp.LastName</td>
					<td>@emp.Email</td>
					<td>@emp.Role</td>
					<td>
						@if (emp.IsActive)
						{
							<span class="badge bg-success">Active</span>
						}
						else
						{
							<span class="badge bg-secondary">Inactive</span>
						}
					</td>
					<td>
						<a class="btn btn-sm btn-outline-info me-1" asp-action="Edit" asp-route-id="@emp.EmployeeId">Edit</a>
						@if (emp.IsActive)
						{
							<a class="btn btn-sm btn-outline-danger" asp-action="Deactivate" asp-route-id="@emp.EmployeeId">Deactivate</a>
						}
						else
						{
							<a class="btn btn-sm btn-outline-success" asp-action="Activate" asp-route-id="@emp.EmployeeId">Activate</a>
						}
					</td>
				</tr>
			}
		</tbody>
	</table>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
