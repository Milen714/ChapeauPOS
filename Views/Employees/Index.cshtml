@model IEnumerable<ChapeauPOS.Models.Employee>

@{
	ViewData["Title"] = "Employees";
	int loggedInEmployeeId = -1;
	if (ViewBag.LoggedInEmployee != null)
	{
		loggedInEmployeeId = ViewBag.LoggedInEmployee.EmployeeId;
	}
}


<div class="container mt-4">
	<h2>@ViewData["Title"]</h2>
	<a class="btn btn-primary mb-3" href="@Url.Action("AddNewEmployee", "Employees")">Add New Employee</a>


	<tbody>	
		@foreach (Employee employee in Model)
	{
		string loggedInStyle = "";
		if(employee.EmployeeId == loggedInEmployeeId)
			{
				string loggedInStyle = emp.EmployeeId == loggedInEmployeeId ? "background-color: #87CEEB;" : string.Empty;
				<tr style="@loggedInStyle">
					<td>@emp.FirstName</td>
					<td>@emp.LastName</td>
					<td>@emp.Email</td>
					<td>@emp.Role</td>
					<td>
						@if (emp.IsActive)
						{
							<span class="badge bg-success">Active</span>
						}
						else
						{
							<span class="badge bg-secondary">Inactive</span>
						}
					</td>
					<td>
						<a class="btn btn-sm btn-outline-info me-1" asp-action="Edit" asp-route-id="@emp.EmployeeId">Edit</a>
						@if (emp.IsActive)
						{
							<a class="btn btn-sm btn-outline-danger" asp-action="Deactivate" asp-route-id="@emp.EmployeeId">Deactivate</a>
						}
						else
						{
							<a class="btn btn-sm btn-outline-success" asp-action="Activate" asp-route-id="@emp.EmployeeId">Activate</a>
						}
					</td>
				</tr>
			}
			<tr style="@loggedInStyle">
			<td>
				@employee.FirstName
			</td>
			<td>
				@employee.LastName
			</td>
			<td>
				@employee.Role
			</td>
			<td>
				<a asp-action="Edit" asp-route-id="@employee.EmployeeId">Edit</a> |
				<a asp-action="Details" asp-route-id="@employee.EmployeeId">Details</a> |
				<a asp-action="Delete" asp-route-id="@employee.EmployeeId">Delete</a>
			</td>
		</tr>
	}
	</tbody>
	</table>